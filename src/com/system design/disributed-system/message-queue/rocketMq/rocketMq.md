## RocketMQ

### 简介

RocketMQ是一个纯Java、分布式、队列模型的开源消息中间件，前身是MetaQ，是阿里参考Kafka特点研发的一个队列模型的消息中间件，后开源
给apache基金会成为了apache的顶级开源项目，具有高性能、高可靠、高实时、分布式的特点。

### 核心架构

##### NameServer

主要负责对于元数据的管理，包括对于Topic和路由信息的管理，类似Zookeeper

##### Producer

消息生产者，负责生产消息  
Producer 由用户进行分布式部署，消息由Producer通过多种负载均衡模式发送到Broker集群，发送低延时，支持快速失败。RocketMQ提供三种方式发送消息：
+ 同步发送：消息发送方发出数据后会在收到接收方发回响应后才发下一个数据包。
+ 异步发送：发送方发出数据后，不等待接收方发回响应，接着发送下个数据包。一般用于链路耗时较长而对响应时间敏感的业务场景，例如用户视频上传后通知启动转码服务
+ 单向发送：负责发送消息而不等待服务器回应且没有回调函数触发，适用于某些耗时非常短但可靠性要求不高的场景，例如日志收集

##### Broker

消息中转角色，负责存储消息，转发消息
+ Broker 是具体提供业务的服务器，单个Broker节点与所有的NameServer节点保持长连接及心跳，并会定时将Topic信息注册到NameServer
+ Broker负责消息存储，以Topic为纬度支持轻量级的队列，单机可支撑上万队列规模，支持消息推拉模型

##### Consumer

消息消费者，负责消费消息。