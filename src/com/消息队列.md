消息队列 

* 优点 解耦 异步 削峰

* 缺点 

  1.系统可用性降低(万一MQ挂了...如何保证其高可用)  RabbitMQ 主从同步 Kafka HA机制(多副本->leader & follower -> broker)

  2.系统复杂性提高

  ​	如何保证消息重复消费：UUID

  ​	消息丢失：生产者->MQ(confirm机制 消息分配唯一id 收到且持久化返回ack 否则回调nack 重传)；MQ(设置持久化)；消费者(关闭自动ack机制 代码返回)

  ​	消息传递的顺序性：消费者从partition中取出后使用多线程处理可能导致顺序错误(消费者写N个内存queue，每个partition数据写到一个内存queue，每隔线程消费一个内存queue)

  3.一致性问题